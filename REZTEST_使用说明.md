# Rez åŒ…ç®¡ç†ç³»ç»Ÿ - å­¦ä¹ æ€»ç»“

## âœ… å·²ä¸ºæ‚¨å®Œæˆçš„å·¥ä½œ

### 1. **ç¯å¢ƒé…ç½®**
- âœ… ç¡®è®¤ Rez 3.3.0 å·²å®‰è£…
- âœ… éªŒè¯ Python ç¯å¢ƒé…ç½®æ­£ç¡®
- âœ… åˆ›å»ºæœ¬åœ°åŒ…æœç´¢ç›®å½• `my_packages/`

### 2. **ç¤ºä¾‹æ–‡ä»¶** (4ä¸ª)

#### ğŸ“„ `test.py` - åŸºç¡€æ¼”ç¤º
è¿è¡Œå‘½ä»¤ï¼š`python test.py`
- æ˜¾ç¤º Rez ç‰ˆæœ¬ä¿¡æ¯
- åˆ—å‡ºé»˜è®¤åŒ…æœç´¢è·¯å¾„
- æ¼”ç¤ºç‰ˆæœ¬è§£æ
- å±•ç¤ºåŸºæœ¬ API ç”¨æ³•

#### ğŸ“„ `create_package_example.py` - åŒ…åˆ›å»ºå‘å¯¼
è¿è¡Œå‘½ä»¤ï¼š`python create_package_example.py`
- è‡ªåŠ¨åˆ›å»ºç¤ºä¾‹åŒ… `myapp-1.0.0`
- ç”Ÿæˆæ ‡å‡†çš„ç›®å½•ç»“æ„
- åˆ›å»º `package.py` é…ç½®æ–‡ä»¶
- ç”Ÿæˆç¤ºä¾‹ä»£ç å’Œæ–‡æ¡£

#### ğŸ“„ `practice_test.py` - å®è·µæµ‹è¯•è„šæœ¬
è¿è¡Œå‘½ä»¤ï¼š`python practice_test.py`
- æœç´¢æœ¬åœ°åŒ…
- è·å–åŒ…è¯¦ç»†ä¿¡æ¯
- æ¼”ç¤ºç‰ˆæœ¬çº¦æŸ
- å°è¯•ç¯å¢ƒè§£æ
- æä¾›å‘½ä»¤é€ŸæŸ¥è¡¨

### 3. **æ–‡æ¡£æ–‡ä»¶** (3ä¸ª)

#### ğŸ“– `REZ_å®Œæ•´æŒ‡å—.md` - å®˜æ–¹çº§è¯¦ç»†æŒ‡å—
å†…å®¹æ¶µç›–ï¼š
- Rez è¯¦ç»†ä»‹ç»å’Œç‰¹ç‚¹
- å®‰è£…æ­¥éª¤
- æ ¸å¿ƒæ¦‚å¿µè§£é‡Š
- å®Œæ•´çš„å‘½ä»¤å‚è€ƒ
- package.py è¯¦ç»†è¯´æ˜
- ç¯å¢ƒç®¡ç†
- ç‰ˆæœ¬çº¦æŸè¯­æ³•
- å®é™…ä½¿ç”¨ç¤ºä¾‹
- å¸¸è§é—®é¢˜è§£ç­”

#### ğŸ“– `å¿«é€Ÿå‚è€ƒ.md` - é€ŸæŸ¥è¡¨
å†…å®¹åŒ…å«ï¼š
- 5åˆ†é’Ÿå¿«é€Ÿå…¥é—¨
- package.py å®Œæ•´ç¤ºä¾‹
- åŒ…ç›®å½•ç»“æ„è¯´æ˜
- ç‰ˆæœ¬çº¦æŸé€ŸæŸ¥
- Python API ç¤ºä¾‹
- å¸¸ç”¨ä»»åŠ¡æ­¥éª¤
- å¸¸è§é—®é¢˜é€Ÿè§£
- èµ„æºé“¾æ¥

#### ğŸ“– `REZTEST_ä½¿ç”¨è¯´æ˜.md` - æœ¬é¡¹ç›®è¯´æ˜ï¼ˆæ­¤æ–‡ä»¶ï¼‰

### 4. **ç¤ºä¾‹åŒ…** - `my_packages/myapp/1.0.0/`
```
my_packages/
â””â”€â”€ myapp/
    â””â”€â”€ 1.0.0/
        â”œâ”€â”€ package.py        # åŒ…é…ç½®æ–‡ä»¶
        â”œâ”€â”€ README.md         # åŒ…æ–‡æ¡£
        â”œâ”€â”€ bin/
        â”‚   â””â”€â”€ myapp.py      # ç¤ºä¾‹è„šæœ¬
        â””â”€â”€ lib/
            â””â”€â”€ __init__.py   # åº“æ–‡ä»¶
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šäº†è§£åŸºç¡€
```powershell
# è¿è¡Œæ¼”ç¤º
python test.py

# æŸ¥çœ‹è¾“å‡ºï¼Œäº†è§£ Rez åŸºæœ¬ä¿¡æ¯
```

### ç¬¬äºŒæ­¥ï¼šæŸ¥çœ‹ç¤ºä¾‹åŒ…
```powershell
# è®¾ç½®åŒ…æœç´¢è·¯å¾„
$env:REZ_PACKAGES_PATH = "E:\UE\RezTest\my_packages"

# éªŒè¯åŒ…å·²è¢«è¯†åˆ«
python -c "from rez import packages; families = list(packages.iter_package_families()); print(f'æ‰¾åˆ°åŒ…: {[f.name for f in families]}')"
```

### ç¬¬ä¸‰æ­¥ï¼šè·å–åŒ…ä¿¡æ¯
```powershell
python -c "
from rez import packages
pkg = packages.get_package('myapp', '1.0.0')
print('=== åŒ…ä¿¡æ¯ ===')
print(f'åç§°: {pkg.name}')
print(f'ç‰ˆæœ¬: {pkg.version}')
print(f'æè¿°: {pkg.description}')
print(f'ä½œè€…: {pkg.authors}')
print(f'ä¾èµ–: {pkg.requires}')
print(f'å˜ä½“: {len(pkg.variants)} ä¸ª')
"
```

### ç¬¬å››æ­¥ï¼šåˆ›å»ºè‡ªå·±çš„åŒ…

ç¼–è¾‘ `my_packages/myapp/1.0.0/package.py`ï¼š

```python
name = "myapp"
version = "1.0.0"
description = "My Application"
authors = ["Your Name"]

# ä¿®æ”¹ä¾èµ–é¡¹ï¼ˆå¦‚æœéœ€è¦ï¼‰
requires = []

def commands():
    import os
    env.PATH.prepend("{root}/bin")
    env.MYAPP_HOME = "{root}"
```

---

## ğŸ“š æ–‡æ¡£æ¨èé˜…è¯»é¡ºåº

### æ–°æ‰‹å…¥é—¨
1. âœ… å…ˆè¯»æœ¬æ–‡ä»¶ï¼ˆ2åˆ†é’Ÿï¼‰
2. ğŸ“– é˜…è¯»ã€Œå¿«é€Ÿå‚è€ƒ.mdã€çš„ã€Œ5åˆ†é’Ÿå¿«é€Ÿå…¥é—¨ã€ï¼ˆ5åˆ†é’Ÿï¼‰
3. â–¶ï¸ è¿è¡Œ `python test.py`ï¼ˆ1åˆ†é’Ÿï¼‰
4. â–¶ï¸ è¿è¡Œ `python create_package_example.py`ï¼ˆ1åˆ†é’Ÿï¼‰

### ä¸­çº§å­¦ä¹ 
5. ğŸ“– é˜…è¯»ã€Œå¿«é€Ÿå‚è€ƒ.mdã€çš„å®Œæ•´å†…å®¹ï¼ˆ15åˆ†é’Ÿï¼‰
6. â–¶ï¸ è¿è¡Œ `python practice_test.py`ï¼ˆ2åˆ†é’Ÿï¼‰
7. ğŸ“– æ ¹æ®éœ€è¦å‚è€ƒã€Œå¿«é€Ÿå‚è€ƒ.mdã€ä¸­çš„å¸¸ç”¨ä»»åŠ¡

### æ·±åº¦ç ”ç©¶
8. ğŸ“– é˜…è¯»ã€ŒREZ_å®Œæ•´æŒ‡å—.mdã€ï¼ˆ30åˆ†é’Ÿï¼‰
9. ğŸ”— è®¿é—® [Rez å®˜æ–¹æ–‡æ¡£](https://rez.readthedocs.io/)

---

## ğŸ¯ å¸¸è§ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šç®¡ç†åº”ç”¨ç‰ˆæœ¬
```powershell
# åˆ›å»ºåº”ç”¨åŒ…
# åœ¨ my_packages/ ä¸­åˆ›å»ºæ–°çš„åº”ç”¨æ–‡ä»¶å¤¹å’Œç‰ˆæœ¬

# é…ç½®ä¾èµ–
# åœ¨ package.py ä¸­æŒ‡å®š requires

# ä½¿ç”¨åŒ…
$env:REZ_PACKAGES_PATH = "E:\UE\RezTest\my_packages"
python -c "from rez.resolved_context import ResolvedContext; ctx = ResolvedContext(['myapp'])"
```

### åœºæ™¯ 2ï¼šç®¡ç†å¼€å‘ç¯å¢ƒ
```powershell
# ä¸ºä¸åŒé¡¹ç›®åˆ›å»ºä¸åŒçš„åŒ…ç¯å¢ƒ
# é¡¹ç›® Aï¼šéœ€è¦ Python 3.9 + Maya 2022
# é¡¹ç›® Bï¼šéœ€è¦ Python 3.11 + 3ds Max

# åœ¨ package.py ä¸­ä½¿ç”¨ requires æŒ‡å®šä¾èµ–
requires = ["python-3.9+<4", "maya-2022+"]
```

### åœºæ™¯ 3ï¼šç®¡ç†å·¥å…·é“¾
```powershell
# åˆ›å»ºå·¥å…·åŒ…ï¼ŒåŒ…å«å¤šä¸ªå¯æ‰§è¡Œæ–‡ä»¶
# bin/ ç›®å½•ä¸­æ”¾ç½®æ‰€æœ‰å·¥å…·
# lib/ ç›®å½•ä¸­æ”¾ç½®åº“æ–‡ä»¶
# ä½¿ç”¨ env.PATH æ·»åŠ åˆ°ç³»ç»Ÿè·¯å¾„
```

---

## ğŸ› ï¸ å®ç”¨æŠ€å·§

### æŠ€å·§ 1ï¼šå¿«é€ŸæŸ¥çœ‹æ‰€æœ‰åŒ…
```powershell
$env:REZ_PACKAGES_PATH = "E:\UE\RezTest\my_packages"
python -c "
from rez import packages
for family in packages.iter_package_families():
    versions = [str(p.version) for p in packages.iter_packages(family.name)]
    print(f'{family.name}: {versions}')
"
```

### æŠ€å·§ 2ï¼šéªŒè¯åŒ…é…ç½®
```powershell
# å°è¯•è·å–åŒ…ï¼Œå¦‚æœæœ‰é”™è¯¯ä¼šç«‹å³æ˜¾ç¤º
$env:REZ_PACKAGES_PATH = "E:\UE\RezTest\my_packages"
python -c "from rez import packages; packages.get_package('myapp', '1.0.0')"
```

### æŠ€å·§ 3ï¼šè°ƒè¯•ç¯å¢ƒå˜é‡
```powershell
python -c "
from rez.resolved_context import ResolvedContext
ctx = ResolvedContext(['myapp'])
env = ctx.get_environ()
print('ç¯å¢ƒå˜é‡:')
for key in sorted(env.keys())[:10]:
    print(f'  {key}={env[key][:50]}')
"
```

---

## ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µå›é¡¾

| æ¦‚å¿µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **Package** | ä¸€ä¸ªè‡ªåŒ…å«çš„è½¯ä»¶å•å…ƒ | myapp-1.0.0 |
| **Version** | åŒ…çš„ç‰ˆæœ¬å· | 1.0.0 |
| **Requires** | åŒ…çš„ä¾èµ–é¡¹ | ["python-3.9+"] |
| **Variants** | åŒ…çš„ä¸åŒé…ç½® | [["python-3.9"], ["python-3.11"]] |
| **Context** | å·²è§£æçš„åŒ…ç¯å¢ƒ | ResolvedContext |
| **Commands** | åŠ è½½æ—¶æ‰§è¡Œçš„é…ç½® | env.PATH.prepend() |

---

## â“ å¿«é€Ÿé—®é¢˜è§£ç­”

**Q: Rez æ˜¯ä»€ä¹ˆï¼Ÿ**
A: ä¸“ä¸º VFX/æ¸¸æˆå¼€å‘è®¾è®¡çš„åŒ…å’Œç¯å¢ƒç®¡ç†ç³»ç»Ÿï¼Œå¯è‡ªåŠ¨è§£å†³ç‰ˆæœ¬å†²çªã€‚

**Q: ä¸ºä»€ä¹ˆè¦ç”¨ Rezï¼Ÿ**
A: ç®¡ç†å¤æ‚çš„ä¾èµ–å…³ç³»ã€åˆ›å»ºéš”ç¦»ç¯å¢ƒã€é¿å…ç‰ˆæœ¬å†²çªã€‚

**Q: å¦‚ä½•åˆ›å»ºåŒ…ï¼Ÿ**
A: åˆ›å»ºç›®å½•ï¼Œæ·»åŠ  package.py é…ç½®æ–‡ä»¶ï¼Œå®šä¹‰ä¾èµ–å’Œå‘½ä»¤å³å¯ã€‚

**Q: package.py æ˜¯ä»€ä¹ˆï¼Ÿ**
A: åŒ…çš„é…ç½®æ–‡ä»¶ï¼Œå®šä¹‰åç§°ã€ç‰ˆæœ¬ã€ä¾èµ–é¡¹å’Œç¯å¢ƒå˜é‡ã€‚

**Q: å¦‚ä½•ä½¿ç”¨åŒ…ï¼Ÿ**
A: é€šè¿‡ Python API æˆ–å‘½ä»¤è¡Œåˆ›å»ºç¯å¢ƒï¼Œè‡ªåŠ¨åŠ è½½æ‰€æœ‰ä¾èµ–å’Œé…ç½®ã€‚

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

### å¿«é€Ÿæ£€æŸ¥æ¸…å•
- [ ] Rez å·²å®‰è£…ï¼Ÿè¿è¡Œ `python -c "import rez; print(rez.__version__)"`
- [ ] åŒ…æœç´¢è·¯å¾„æ­£ç¡®ï¼Ÿè¿è¡Œ `test.py` æŸ¥çœ‹
- [ ] æœ¬åœ°åŒ…å­˜åœ¨ï¼Ÿæ£€æŸ¥ `my_packages/myapp/1.0.0/`
- [ ] package.py æœ‰æ•ˆï¼Ÿè¿è¡Œ `practice_test.py`

### è°ƒè¯•æ­¥éª¤
1. è¿è¡Œ `python test.py` - æ£€æŸ¥ Rez æ˜¯å¦æ­£å¸¸å·¥ä½œ
2. è¿è¡Œ `python practice_test.py` - æ£€æŸ¥æœ¬åœ°åŒ…æ˜¯å¦å¯è¯†åˆ«
3. æŸ¥çœ‹ `REZ_å®Œæ•´æŒ‡å—.md` çš„å¸¸è§é—®é¢˜éƒ¨åˆ†
4. è®¿é—® [Rez å®˜æ–¹æ–‡æ¡£](https://rez.readthedocs.io/)

---

## ğŸ“‹ æ–‡ä»¶æ£€æŸ¥æ¸…å•

é¡¹ç›®åº”è¯¥åŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼š

- [ ] `test.py` - åŸºç¡€æ¼”ç¤ºè„šæœ¬
- [ ] `create_package_example.py` - åŒ…åˆ›å»ºè„šæœ¬
- [ ] `practice_test.py` - å®è·µæµ‹è¯•è„šæœ¬
- [ ] `REZ_å®Œæ•´æŒ‡å—.md` - è¯¦ç»†æŒ‡å—
- [ ] `å¿«é€Ÿå‚è€ƒ.md` - é€ŸæŸ¥è¡¨
- [ ] `my_packages/myapp/1.0.0/package.py` - ç¤ºä¾‹åŒ…é…ç½®
- [ ] `my_packages/myapp/1.0.0/bin/myapp.py` - ç¤ºä¾‹è„šæœ¬
- [ ] `my_packages/myapp/1.0.0/lib/__init__.py` - ç¤ºä¾‹åº“æ–‡ä»¶

---

## ğŸ“ å­¦ä¹ è·¯çº¿å›¾

```
æ–°æ‰‹å…¥é—¨
   â†“
ç†è§£åŸºç¡€æ¦‚å¿µ
   â†“
è¿è¡Œæ¼”ç¤ºè„šæœ¬
   â†“
åˆ›å»ºè‡ªå·±çš„åŒ…
   â†“
ä½¿ç”¨ Python API
   â†“
ç®¡ç†å¤æ‚ç¯å¢ƒ
   â†“
é›†æˆåˆ°å·¥ä½œæµ
```

---

## ğŸŒŸ ä¸‹ä¸€æ­¥å»ºè®®

1. **å­¦ä¹ åŸºç¡€** - é˜…è¯»æœ¬æ–‡æ¡£å’Œå¿«é€Ÿå‚è€ƒ
2. **åˆ›å»ºåŒ…** - ä¿®æ”¹ç¤ºä¾‹åŒ…æˆ–åˆ›å»ºæ–°åŒ…
3. **å®éªŒ** - å°è¯•åˆ›å»ºåŒ…å«ä¸åŒä¾èµ–çš„åŒ…
4. **é›†æˆ** - å°† Rez é›†æˆåˆ°æ‚¨çš„é¡¹ç›®æµç¨‹ä¸­
5. **æ·±åŒ–** - å­¦ä¹ é«˜çº§ç‰¹æ€§ï¼ˆå˜ä½“ã€è§£æç­‰ï¼‰

---

**ç¥æ‚¨ä½¿ç”¨ Rez æ„‰å¿«ï¼** ğŸš€

æ›´æ–°æ—¥æœŸï¼š2025å¹´11æœˆ24æ—¥
Rez ç‰ˆæœ¬ï¼š3.3.0
